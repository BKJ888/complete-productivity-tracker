<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>生產力追蹤系統</title>
  <!-- 外部 CSS -->
  <link rel="stylesheet" href="css/style.css">
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>🎯 完整生產力追蹤系統</h1>
      <p>番茄工作法 × 習慣追蹤 × 週間反思 × 月度報告 × 目標管理</p>
    </div>

    <!-- 導覽 Tabs -->
    <div class="nav-tabs">
      <button class="nav-tab active" onclick="switchTab('pomodoro')">🍅 番茄工作法</button>
      <button class="nav-tab" onclick="switchTab('daily')">📅 每日追蹤</button>
      <button class="nav-tab" onclick="switchTab('weekly')">📊 週間反思</button>
      <button class="nav-tab" onclick="switchTab('monthly')">📈 月度報告</button>
      <button class="nav-tab" onclick="switchTab('goals')">🎯 目標管理</button>
    </div>

    <!-- Pomodoro Tab -->
    <div id="pomodoro-tab" class="tab-content active">
      <div class="pomodoro-card">
        <div id="timer-display" class="timer-display">25:00</div>
        <div id="timer-status" class="timer-status">⏰ 準備開始工作</div>

        <!-- 自訂時間設定 -->
        <div class="time-settings">
          <div class="time-input">
            <label>工作</label>
            <input type="number" id="work-time" value="25" min="1"> 分鐘
          </div>
          <div class="time-input">
            <label>休息</label>
            <input type="number" id="break-time" value="5" min="1"> 分鐘
          </div>
          <button class="btn-primary" onclick="setCustomTime()">套用</button>
        </div>

        <div id="current-task" class="current-task" style="display:none;">
          <strong>目前任務：</strong><span id="current-task-name"></span>
        </div>

        <div class="btn-group">
          <button id="start-btn" class="btn-success" disabled>▶️ 開始</button>
          <button id="pause-btn" class="btn-warning" disabled>⏸️ 暫停</button>
          <button id="reset-btn" class="btn-danger">🔄 重設</button>
        </div>
      </div>

      <!-- 任務輸入 -->
      <div class="task-input-box">
        <input type="text" id="task-input" placeholder="輸入新任務...">
        <button id="add-btn" class="btn-primary">➕ 新增任務</button>
      </div>

      <!-- 任務清單 -->
      <div id="task-list" class="task-list"></div>
    </div>

    <!-- Daily Tracker Tab -->
    <div id="daily-tab" class="tab-content">
      <div class="daily-tracker">
        <div class="date-selector">
          <button class="date-nav" onclick="changeDate(-1)">◀️ 前一天</button>
          <div class="current-date" id="current-date"></div>
          <button class="date-nav" onclick="changeDate(1)">後一天 ▶️</button>
        </div>

        <!-- 習慣清單 -->
        <div id="habits-grid" class="habits-grid"></div>

        <!-- 新增習慣區塊 -->
        <div class="add-habit-box">
          <h3>➕ 新增習慣</h3>
          <div class="add-habit-form">
            <select id="habit-icon">
              <option value="💧">💧 喝水</option>
              <option value="🏃‍♂️">🏃‍♂️ 運動</option>
              <option value="📚">📚 閱讀</option>
              <option value="🛏️">🛏️ 早睡</option>
              <option value="🍎">🍎 健康飲食</option>
            </select>
            <input type="text" id="habit-name" placeholder="輸入習慣名稱...">
            <input type="number" id="habit-target" placeholder="目標次數" min="1" value="1">
            <button onclick="addCustomHabit()">新增</button>
          </div>
        </div>

        <div style="text-align:center;margin-top:20px;">
          <button class="btn btn-save" onclick="saveDailyData()">💾 保存今日記錄</button>
        </div>
      </div>
    </div>

    <!-- Weekly Review Tab -->
    <div id="weekly-tab" class="tab-content">
      <div id="progress-overview" class="weekly-card"></div>
      <div class="reflection-section">
        <div class="reflection-title">🎉 本週最成功的三件事</div>
        <div id="achievements-list"></div>
      </div>
    </div>

    <!-- 月度報告 Tab -->
    <div id="monthly-tab" class="tab-content">
      <div class="monthly-card">
        <h2>📈 月度報告</h2>
        <canvas id="monthlyChart" style="max-height:400px;"></canvas>
      </div>
    </div>

    <!-- 目標管理 Tab -->
    <div id="goals-tab" class="tab-content">
      <div class="goals-card">
        <h2>🎯 長期目標管理</h2>
        <div class="goal-inputs">
          <input type="text" id="goal-input" placeholder="輸入長期目標...">
          <input type="number" id="goal-target" placeholder="目標次數">
          <button onclick="addGoal()" class="btn-success">新增</button>
        </div>
        <div id="goal-list"></div>
      </div>
    </div>
  </div>

  <!-- 深色模式切換按鈕 -->
  <div style="position:fixed;bottom:20px;right:20px;">
    <button onclick="toggleDarkMode()" class="darkmode-btn">🌙</button>
  </div>

  <!-- 通知 -->
  <div id="notification" class="notification"></div>

  <!-- 外部 JS -->
  <script src="js/app.js"></script>
</body>
</html>
